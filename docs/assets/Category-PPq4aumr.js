import"./base-9Z_h2vHL.js";import{E as b}from"./el-button-HY03yLLG.js";import{C as P}from"./CoverPlay-PJPyKv4Z.js";import{h as f,r as v,o as C,m as a,p as s,A as r,F as g,Y as h,I as u,a0 as x,$,S as E,G as _,C as H,q,y,a6 as B,a9 as F}from"./index-Xc3Yzc2G.js";import{i as N,j as V}from"./api-RBkkRLth.js";import"./index-kTyWkl82.js";import"./use-form-item-udUjy6Ez.js";import"./index-7MvDZnRv.js";import"./constants-ylLUDuoU.js";import"./el-image-viewer-0edSsv60.js";import"./typescript-ml7cVkNB.js";import"./scroll-ZjKFmqgD.js";import"./IconPark-ggFK5aku.js";import"./PlayOne-MwD_A6RN.js";const D={class:"grid grid-flow-row grid-cols-8 2xl:grid-cols-12 gap-2.5"},T=["onClick"],I=f({__name:"PlaylistHot",emits:["catChange"],setup(k,{emit:m}){const i=v(),t=m,c=n=>{t("catChange",n)};return C(async()=>{i.value=await N()}),(n,l)=>(a(),s("div",D,[r("div",{class:"button-dc",onClick:l[0]||(l[0]=e=>c("全部"))},"全部"),(a(!0),s(g,null,h(i.value,e=>(a(),s("div",{class:"button-dc",key:e.id,onClick:d=>c(e.name)},u(e.name),9,T))),128))]))}}),M=x(I,[["__file","E:/code/2023-暑期/5-vue/1-demo/vue3-music/src/views/music/category/PlaylistHot.vue"]]),S={class:"py-5 text-xl"},j={class:"grid grid-flow-row grid-cols-3 lg:grid-cols-6 gap-5"},A=["onClick"],G={class:"truncate text-xs mt-2 text-main leading-5"},L={class:"truncate text-xs mt-2 text-main"},R={key:0,class:"py-10"},U=f({__name:"Category",setup(k){const m=$(),i=v([]),t=E({init:!1,loading:!1,limit:30,before:0,more:!1,cat:"全部"}),c=e=>{t.cat=e,t.before=0,t.more=!1,n()},n=async()=>{t.loading=!0;try{const{playlists:e,more:d,lasttime:p}=await V({limit:t.limit,before:t.before,cat:t.cat});t.before<=0?i.value=e:i.value.push(...e),t.init=!0,t.loading=!1,t.before=p,t.more=d}catch{}},l=()=>{n()};return C(n),(e,d)=>{const p=P,w=b;return a(),s(g,null,[_(M,{onCatChange:c}),r("div",S,u(t.cat)+"歌单",1),r("div",j,[(a(!0),s(g,null,h(i.value,o=>(a(),s("div",{key:o.id,onClick:Y=>y(m).push({name:y(B).playlist,query:{id:o.id}})},[_(p,{"pic-url":o.coverImgUrl,name:o.name,"play-count":o.playCount,"show-play-count":""},null,8,["pic-url","name","play-count"]),r("div",G,u(o.name),1),r("div",L,u(o.creator.nickname),1)],8,A))),128))]),t.more?(a(),s("div",R,[_(w,{class:"w-full text-center",link:"",onClick:l,loading:t.loading},{default:H(()=>[F(" 加载更多 ")]),_:1},8,["loading"])])):q("v-if",!0)],64)}}}),nt=x(U,[["__file","E:/code/2023-暑期/5-vue/1-demo/vue3-music/src/views/music/category/Category.vue"]]);export{nt as default};
